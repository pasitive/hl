/* http://learn.javascript.ru/js-animation http://www.hitechforum.ru/index.php?option=com_content&view=article&id=129 */(function($){	/**	 *	 * Bounce	 *	 */	$.fn.bubbleBounce = function (options) {		/**		 *		 */		var defaultOptions = {			speed : 2000,			delay : 0		};		/**		 *		 */		function animate(opts) {			var start = new Date;			var timer = setInterval(function () {				var progress = (new Date - start) / opts.speed;				if (progress > 1) progress = 1;				opts.step(opts.delta(progress));				opts.elem.css('display', 'block');				if (progress == 1) {					clearInterval(timer);					opts.complete && opts.complete();				}			}, opts.delay);			return timer;		};		/**		 *		 */		function move(elem, delta, speed) {			var elemHeight = elem.outerHeight();			var to = elem.parent().height()			animate({				delay: 10,				elem: elem,				speed: speed,				delta: delta,				step: function (delta) {					elem.get(0).style.marginTop = to * delta - elemHeight + "px"				}			});		};		/**		 *		 */		function bounce(progress) {			for (var a = 0, b = 1; 1; a += b, b /= 2) {				if (progress >= (7 - 4 * a) / 11) {					return -Math.pow((11 - 6 * a - 11 * progress) / 4, 2) + Math.pow(b, 2);					//return Math.pow(2, 10 * (progress-1)) * Math.cos(20*Math.PI*1.5/3*progress);				}			}		};		/**		 *		 */		function makeEaseOut(delta) {  // РїСЂРµРѕР±СЂР°Р·РѕРІР°С‚СЊ delta			return function (progress) {				return 1 - delta(1 - progress);			}		};		/**		 *		 */		return this.each(function () {			var settings = $.extend(defaultOptions, options);			var el = $(this).find('.circle');			move(				el,				makeEaseOut(bounce),				$(this).data('speed') || settings.speed			);		});	};	/**	 *	 * Bubble fade	 *	 */	$.fn.bubbleFade = function() {		return this.each(function(){			var size = $(this).data('size');			var _this = this;			var delay = $(this).data('delay') || 0;			setTimeout(function(){				$(_this).animate(					{						width           : size,						height          : size,						'margin-left'   : -size/2,						'margin-top'    : -size/2					},					1000				);			}, delay);		});	};	/**	 *	 * Bubble balance	 *	 */	$.fn.bubbleBalance = function() {		this.each(function(){			$(this).mouseenter(function(e){				var _this = this;				var parent = $(this).parent();				var start = parseInt( parent.css('left') );				var end = start ? -start : $(this).data('rotate');				if (e.originalEvent) {					$(_this).data('stopRotate', false);				}				if ($(_this).data('stopRotate')) {					$(_this).data('stopRotate', false);					end = 0;				}				parent.stop();				parent.css('left', start);				parent.animate(					{						left: end					},					{						duration : $(this).data('rotateSpeed'),						step : function(now, fx){							var value = 'rotate(' + now + 'deg)';							parent.css('-webkit-transform', value);							parent.css('-moz-transform', value);							parent.css('-ms-transform', value);							parent.css('-o-transform', value);							parent.css('transform', value);						},						done : function(){							if (end !== 0) {								$(_this).trigger('mouseenter');							}						}					}				);			}).mouseleave(function(){					$(this).data('stopRotate', true);				});		});	}})(jQuery);